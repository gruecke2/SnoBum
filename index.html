<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>

    <!-- AJAX -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
    <!-- Bootstrap 4 CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Condiment" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css" />

    <!-- particles.js -->
    <script src="assets/js/particles.min.js"></script>
    <script src="assets/js/app.js"></script>

    <title>SnowBum</title>
  </head>
  <body>
    <!-- Particles div -->
    <div id="particles-js"></div>

    <!--Navbar-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="navbar-brand" href="#">
        <img src="assets/images/carousel_images/Sno Bum.png" alt="little-logo" id="little-logo"
         width="60" height="60">
      </div>
      <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId" aria-controls="collapsibleNavId"
          aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="collapsibleNavId">
        <div class="dropdown">
          <button class="btn btn-secondary btn-lg dropdown-toggle" type="button" id="triggerId" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">
                Resorts
              </button>
          <div class="dropdown-menu" aria-labelledby="triggerId">
              <div role="seperator" class="dropdown-header">Big Cottonwood Canyon</div>
              <a href="#" class="dropdown-item"id="brighton"><span><img src="assets/images/brighton-logo.png" alt="brtn" class="resort-small"></span></a>
              <a href="#" class="dropdown-item"id="solitude"><span><img src="assets/images/solitude-logo.png" alt="sltd" class="resort-small"></span></a>
              <div role="seperator" class="dropdown-header">Little Cottonwood Canyon</div>
              <a href="#" class="dropdown-item"id="snowbird"><span><img src="assets/images/snowbird-logo.png" alt="snwbrd" class="resort-small"></span></a>
              <a href="#" class="dropdown-item"id="alta"><span><img src="assets/images/Alta_Logo.png" alt="alta" class="resort-small"></span></a>
              <div role="seperator" class="dropdown-header">Parley's Canyon</div>
              <a href="#" class="dropdown-item"id="park-city"><span><img src="assets/images/park-city-logo.png" alt="prkcity" class="resort-small"></span></a>
              <a href="#" class="dropdown-item"id="deer-valley"><span><img src="assets/images/deer-valley-resort-logo.png" alt="deerval" class="resort-small"></span></a>
          </div>
        </div>
        <p class="navbar-text" id="small-message">Need a ride? We can help get your SnoBum to the slopes! </p>
      </div>
    </nav>

    <!--Main Content-->
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-5 col-md-5 col-sm-12">
          <img src="assets/images/carousel_images/image.png" id="logo2" alt="logoFont" />
          <div id="map"></div>
        </div>



        <!--Carousel-->
        <!--Considering hiding the carousel when the frame is small - thoughts?-->
        <!--Still working on photo quality/SIZING**-->
        <div class="col-lg-7 col-md-7 col-sm-12">

          <div id="imgCarousel" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
              <li data-target="#imgCarousel" data-slide-to="0" class="active"></li>
              <li data-target="#imgCarousel" data-slide-to="1"></li>
              <li data-target="#imgCarousel" data-slide-to="2"></li>
              <li data-target="#imgCarousel" data-slide-to="3"></li>
              <li data-target="#imgCarousel" data-slide-to="4"></li>
              <li data-target="#imgCarousel" data-slide-to="5"></li>
              <li data-target="#imgCarousel" data-slide-to="6"></li>
              <li data-target="#imgCarousel" data-slide-to="7"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
              <div class="img-fluid carousel-item active">
                <img src="assets/images/carousel_images/map-lg.jpeg" alt="First slide">
              </div>
              <div class="img-fluid carousel-item">
                <img src="assets/images/carousel_images/UTA.jpg" alt="Second slide">
              </div>
              <div class="img-fluid carousel-item">
                <img src="assets/images/carousel_images/Snowbird.jpg" alt="Third slide">
              </div>
              <div class="img-fluid carousel-item">
                <img src="assets/images/carousel_images/slide3.jpg" alt="Third slide">
              </div>
              <div class="img-fluid carousel-item">
                <img src="assets/images/carousel_images/cat.jpg" alt="Third slide">
              </div>
              <div class="img-fluid carousel-item">
                <img src="assets/images/carousel_images/jump.jpg" alt="Third slide">
              </div>
              <div class="img-fluid carousel-item">
                <img src="assets/images/carousel_images/powRed.jpg" alt="Third slide">
              </div>
              <div class="img-fluid carousel-item">
                <img src="assets/images/carousel_images/heli.jpg" alt="Third slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#imgCarousel" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#imgCarousel" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>

          <!--Resort Destination and Arrival Time : data boxes-->
            <div class="row">
              <div id="right-panel"></div>
            </div>

            <!--Time Input : data box-->
          </div>
        </div>
      </div>

      <!--Weather/repeating element-->
      <div class="container"> 
        <div class="row" id="forecast">
          <!--in same font as SnoBum logo as image to span entire page-->
          <div class="col-lg-12 col-md-12"></div>
            <img src="assets/images/Forecast Orange.PNG" alt="forecast" width="100%">
        </div>
        <div class="row">
          <div class="col-lg-12 col-md-12">
            <div class="card bg-light" border-color:darkblue;">
              <img class="card-img-top" id="weather-icon" src="assets/images/Sno Bum Small.PNG" alt="weather-icon">
              <div class="card-body">
                <h4 class="card-title" id="weather-head">Weather Information</h4>
                <p class="card-text" id="start-weather">Load a resort to see the weather!</p>
                <div id="description"></div>
                <div id="current-temp"></div>
                <div id="max-min"></div>
                <div id="humidity"></div>
                <div id="wind"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

    <!-- Google Maps plugin -->
    <script>
      function initMap() {
  var directionsDisplay = new google.maps.DirectionsRenderer();
  var directionsService = new google.maps.DirectionsService();
  var map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: 40.5819, lng: -111.6552 },
    zoom: 8
  });
  directionsDisplay.setMap(map);
  directionsDisplay.setPanel(document.getElementById("right-panel"));

  $("#snowbird").on("click", function(){
    calculateAndDisplayRoute(directionsService, directionsDisplay, "Snowbird");
  })
  $("#alta").on("click", function(){
    calculateAndDisplayRoute(directionsService, directionsDisplay, "Alta Ski Area");
  })
  $("#brighton").on("click", function(){
    calculateAndDisplayRoute(directionsService, directionsDisplay, "Brighton Resort");
  })
  $("#solitude").on("click", function(){
    calculateAndDisplayRoute(directionsService, directionsDisplay, "Solitude Mountain Resort");
  })
  $("#park-city").on("click", function(){
    calculateAndDisplayRoute(directionsService, directionsDisplay, "Park City Mountain");
  })
  $("#deer-valley").on("click", function(){
    calculateAndDisplayRoute(directionsService, directionsDisplay, "Deer Valley Resort");
  })
}

function calculateAndDisplayRoute(directionsService, directionsDisplay, dest) {

  directionsService.route(
    {
      origin: pos,
      destination: dest,
      travelMode: "TRANSIT"
    },
    function(response, status) {
      if (status === "OK") {
        directionsDisplay.setDirections(response);
      } else {
        window.alert("Directions request failed due to " + status);
      }
    }
  );
}

// Try HTML5 geolocation.
if (navigator.geolocation) {
    
  navigator.geolocation.getCurrentPosition(
    function(position) {
      pos = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };

      infoWindow.setPosition(pos);
      infoWindow.setContent("Location found.");
      infoWindow.open(map);
      map.setCenter(pos);
    },
    function() {
      handleLocationError(true, infoWindow, map.getCenter());
    }
  );
} else {
  // Browser doesn't support Geolocation
  handleLocationError(false, infoWindow, map.getCenter());
}

function handleLocationError(browserHasGeolocation, infoWindow, pos) {
  infoWindow.setPosition(pos);
  infoWindow.setContent(
    browserHasGeolocation
      ? "Error: The Geolocation service failed."
      : "Error: Your browser doesn't support geolocation."
  );
  infoWindow.open(map);
}
    </script>


<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCP8LrH8BEilckAhCvu2FK6o0DIvUJsBRQ&callback=initMap" async defer></script>
<script src="assets/js/weather.js"></script>  
</body>
</html>
