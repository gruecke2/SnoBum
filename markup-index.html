<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
    <link rel="stylestheet" type="text/css" href="Assets/style.css" />
    <title>Sno Bum</title>
  </head>
  <body>
    <!-- Snobum Image -->
    <div class="shadow-lg">
      <img
        src="Assets/Image/Sno Bum Small.PNG"
        width="800px"
        height="150px"
        class="shadow-lg"
        id="Image"
      />

      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-light bg-light" id="navbar">
        <a class="navbar-brand" href="#">Snobum</a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNavDropdown"
          aria-controls="navbarNavDropdown"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item active">
              <a class="nav-link" href="#"
                >Profile<span class="sr-only">(current)</span></a
              >
            </li>
            <li class="nav-item"><a class="nav-link" href="#"></a></li>
            <li class="nav-item"><a class="nav-link" href="#"></a></li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="navbarDropdownMenuLink"
                role="button"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                Resorts
              </a>
              <div
                class="dropdown-menu"
                aria-labelledby="navbarDropdownMenuLink"
              >
                <option class="dropdown-item" href="#" value="Snowbird" onclick="calcRoute()"
                  >Snowbird</option
                >
                <option class="dropdown-item" href="#" value="">Alta</option>
                <option class="dropdown-item" href="#" value=""
                  >Brighton</option
                >
                <option class="dropdown-item" href="#" value=""
                  >Solitude</option
                >
                <option class="dropdown-item" href="#" value=""
                  >Park City</option
                >
                <option class="dropdown-item" href="#" value=""
                  >Deer Valley</option
                >
              </div>
            </li>
          </ul>
        </div>
      </nav>
    </div>

    <!-- Google Map -->
    <div id="map" class="shadow-lg"></div>
    <script>
      // var map;
      // function initMap() {
      //   var directionsService = new google.maps.DirectionsService();
      //   var directionsDisplay = new google.maps.DirectionsRenderer();
      //   map = new google.maps.Map(document.getElementById("map"), {
      //     center: { lat: 40.5819, lng: -111.6552 },
      //     zoom: 8
      //   });
      // }
    </script>

    <!-- Location Script -->
    <script>
      // Note: This example requires that you consent to location sharing when
      // prompted by your browser. If you see the error "The Geolocation service
      // failed.", it means you probably did not give permission for the browser to
      // locate you.
      var map, infoWindow, pos;
      function initMap() {
        directionsService = new google.maps.DirectionsService();
        directionsDisplay = new google.maps.DirectionsRenderer();
        map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: 40.5819, lng: -111.6552 },
          zoom: 8
        });
        infoWindow = new google.maps.InfoWindow();

        // Try HTML5 geolocation.
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            function(position) {
               pos = {
                lat: position.coords.latitude,
                lng: position.coords.longitude
              };

              infoWindow.setPosition(pos);
              infoWindow.setContent("Location found.");
              infoWindow.open(map);
              map.setCenter(pos);
            },
            function() {
              handleLocationError(true, infoWindow, map.getCenter());
            }
          );
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }

      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(
          browserHasGeolocation
            ? "Error: The Geolocation service failed."
            : "Error: Your browser doesn't support geolocation."
        );
        infoWindow.open(map);
      }

      function calcRoute() {
        var dest = new google.maps.LatLng(40.581042, -111.657599);

        var request = {
          origin: pos,
          destination: dest,
          travelMode: "TRANSIT"
        };
        directionsService.route(request, function(result, status) {
          if (status == "OK") {
            console.log('Request: ' + request);
            console.log('Result: ' + result);
            console.log("Reached OK status ")
            directionsDisplay.setDirections(result);
          }
        });
      }
    </script>

    <!-- Route Script -->
    <script></script>

    <!-- Weather Info -->
    <div class="weather shadow-lg">
      <div class="card-body">
        <h5 class="card-title city"></h5>
        <div class="wind"></div>
        <div class="humidity"></div>
        <div class="temp"></div>
      </div>
    </div>

    <!-- Yelp & Spotify -->
    <div class="row" id="yelp">
      <div class="col-sm-6">
        <div class="card shadow-lg bg-danger">
          <div class="card-body">
            <h5 class="card-title">Yelp</h5>
            <p class="card-text">Grab a beer?</p>
            <a href="#" class="btn btn-primary">Go</a>
          </div>
        </div>
      </div>
      <div class="col-sm-6" id="spotify">
        <div class="card shadow-lg bg-success">
          <div class="card-body">
            <h5 class="card-title">Spotify</h5>
            <p class="card-text">Find a station!</p>
            <a href="#" class="btn btn-primary">Go</a>
          </div>
        </div>
      </div>
    </div>

    <br />

    <!-- Inline styling -->
    <style>
      body {
        margin-left: 375px;
        background-color: rgb(204, 253, 255);
        width: 800px;
      }
      .navbar {
        margin-bottom: 15px;
      }
      #map {
        height: 400px;
        width: 800px;
      }
      .weather {
        margin-top: 15px;
        width: 800px;
      }
      .card {
        margin-top: 15px;
      }
    </style>

    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCP8LrH8BEilckAhCvu2FK6o0DIvUJsBRQ&callback=initMap"
      async
      defer
    ></script>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
      integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
      integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
      crossorigin="anonymous"
    ></script>
    <script src="Assets/javascript.js"></script>
  </body>
</html>
